{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ratingsAPI}from'../services/api';import{useAuth}from'../hooks/useAuth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Ratings=()=>{const[ratings,setRatings]=useState([]);const[loading,setLoading]=useState(false);const{user}=useAuth();useEffect(()=>{fetchRatings();},[]);const fetchRatings=async()=>{setLoading(true);try{const response=await ratingsAPI.getUserRatings(user.id);setRatings(response.data);}catch(error){console.error('Error fetching ratings:',error);}setLoading(false);};const renderStars=score=>{return'★'.repeat(score)+'☆'.repeat(5-score);};const averageRating=ratings.length>0?(ratings.reduce((sum,rating)=>sum+rating.score,0)/ratings.length).toFixed(1):0;if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-8\",children:\"My Ratings & Feedback\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl font-bold text-primary mb-2\",children:averageRating}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl text-yellow-500 mb-2\",children:renderStars(Math.round(averageRating))}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Based on \",ratings.length,\" reviews\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Recent Reviews\"}),ratings.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-8\",children:\"No ratings received yet\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:ratings.map(rating=>/*#__PURE__*/_jsxs(\"div\",{className:\"border-b pb-4 last:border-b-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center\",children:rating.rater_name.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold\",children:rating.rater_name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-yellow-500\",children:renderStars(rating.score)})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:new Date(rating.created_at).toLocaleDateString()})]}),rating.comment&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 ml-13\",children:rating.comment})]},rating.id))})]})]});};export default Ratings;","map":{"version":3,"names":["React","useState","useEffect","ratingsAPI","useAuth","jsx","_jsx","jsxs","_jsxs","Ratings","ratings","setRatings","loading","setLoading","user","fetchRatings","response","getUserRatings","id","data","error","console","renderStars","score","repeat","averageRating","length","reduce","sum","rating","toFixed","className","children","Math","round","map","rater_name","charAt","toUpperCase","Date","created_at","toLocaleDateString","comment"],"sources":["/Users/rahulpatel/oddop1/frontend/src/pages/Ratings.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ratingsAPI } from '../services/api';\nimport { useAuth } from '../hooks/useAuth';\n\nconst Ratings = () => {\n  const [ratings, setRatings] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const { user } = useAuth();\n\n  useEffect(() => {\n    fetchRatings();\n  }, []);\n\n  const fetchRatings = async () => {\n    setLoading(true);\n    try {\n      const response = await ratingsAPI.getUserRatings(user.id);\n      setRatings(response.data);\n    } catch (error) {\n      console.error('Error fetching ratings:', error);\n    }\n    setLoading(false);\n  };\n\n  const renderStars = (score) => {\n    return '★'.repeat(score) + '☆'.repeat(5 - score);\n  };\n\n  const averageRating = ratings.length > 0 \n    ? (ratings.reduce((sum, rating) => sum + rating.score, 0) / ratings.length).toFixed(1)\n    : 0;\n\n  if (loading) {\n    return <div className=\"text-center py-8\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <h1 className=\"text-3xl font-bold mb-8\">My Ratings & Feedback</h1>\n\n      {/* Rating Summary */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md mb-8\">\n        <div className=\"text-center\">\n          <div className=\"text-4xl font-bold text-primary mb-2\">{averageRating}</div>\n          <div className=\"text-2xl text-yellow-500 mb-2\">\n            {renderStars(Math.round(averageRating))}\n          </div>\n          <p className=\"text-gray-600\">Based on {ratings.length} reviews</p>\n        </div>\n      </div>\n\n      {/* Individual Ratings */}\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h2 className=\"text-xl font-semibold mb-4\">Recent Reviews</h2>\n        {ratings.length === 0 ? (\n          <p className=\"text-gray-500 text-center py-8\">No ratings received yet</p>\n        ) : (\n          <div className=\"space-y-4\">\n            {ratings.map((rating) => (\n              <div key={rating.id} className=\"border-b pb-4 last:border-b-0\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"flex items-center\">\n                    <div className=\"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center\">\n                      {rating.rater_name.charAt(0).toUpperCase()}\n                    </div>\n                    <div className=\"ml-3\">\n                      <h3 className=\"font-semibold\">{rating.rater_name}</h3>\n                      <div className=\"text-yellow-500\">{renderStars(rating.score)}</div>\n                    </div>\n                  </div>\n                  <span className=\"text-sm text-gray-500\">\n                    {new Date(rating.created_at).toLocaleDateString()}\n                  </span>\n                </div>\n                {rating.comment && (\n                  <p className=\"text-gray-700 ml-13\">{rating.comment}</p>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Ratings;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}